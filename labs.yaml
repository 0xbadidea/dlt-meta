---
name: dlt-meta
description: Metadata-driven framework based on Databricks Delta Live Tables 
install:
  script: src/install.py
entrypoint: src/cli.py
min_python: 3.10
commands:
  - name: onboard
    description: onboards dlt-meta configuration for bronze and silver layers
    flags:
      - name: onboarding_file_path
        description: onboarding file path
      - name: onboarding_files_dir_path
        description: provide onboarding files directory where data quality expectations and silver_tranformations files are present
      - name: onboard_layer
        description: onboard layer bronze or silver or bronze_silver
      - name: uc_enabled
        description: uc enabled True or False(Default:False)
      - name: uc_catalog_name
        description: uc catalog name(only if uc_enabled is True)
      - name: dlt_meta_schema
        description: dlt meta schema name for storing dataflowspecs    
      - name: bronze_dataflowspec_table
        description: bronze dataflow spec table name(Default:bronze_dataflowspecs)
      - name: bronze_dataflowspec_path
        description: bronze dataflow spec path if uc_enabled is False
      - name: silver_dataflowspec_table
        description: silver dataflow spec table name (Default:silver_dataflowspecs)
      - name: silver_dataflowspec_path
        description: silver dataflow spec path if uc_enabled is False
      - name: overwrite
        description: True:overwrites existing dataflowspecs, False:Merge with existing dataflowspecs(Default:True)
      - name: env
        description: env        
      - name: import_author
        description: import author
      - name: version
        description: version
  - name: deploy
    description: Deploys DLT-Meta pipelines for bronze and silver layers after onboarding dataflowspecs
    flags:
      - name: uc_enabled
        description: uc enabled True or False (Default:False)
      - name: uc_catalog_name
        description: uc catalog name(only if uc_enabled is True)
      - name: serverless
        description: serverless True(if uc_enable=True) or False (Default:False)
      - name: num_workers
        description: number of workers for serverless if serverless=False
      - name: layer
        description: layer bronze or silver
      - name: dlt_meta_schema
        description: dlt meta schema name for reading dataflowspecs
      - name: dlt_target_schema
        description: dlt target schema name for storing dataflowspecs
      - name: dataflowspec_table
        description: dataflow spec table name
      - name: dataflowspec_path
        description: dataflow spec path if uc_enabled is False
      - name: onboard_group
        description: Provide dlt meta onboard group
      - name: pipeline_name
        description: dlt pipeline name
      - name: channel
        description: dlt channel name current or preview
      - name: cloud
        description: cloud name aws or azure or gcp